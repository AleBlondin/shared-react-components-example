# [Verdaccio] Debugging

## npm config on the Git server

If the publication on the Verdaccio is failing, check that the npm config is well set:

1. Connect to the git server on a HVD
2. It should have this content:

```
@shared-components:registry=https://10.190.68.214/verdaccio/
//10.190.68.214/verdaccio/:_authToken="<TOKEN>"
strict-ssl=false
https-proxy=http://proxy-bru.adroot.local:8080/
proxy=http://proxy-bru.adroot.local:8080/
```

npm config explanations:

- The `<TOKEN>` can be generated by `npm login --registry={verdaccio url} --scope=@shared-components`
- You will find the internal IP of your verdaccio
- `strict-ssl=false` avoids some certificate issues while connecting to the Verdaccio

## Verdaccio config

If you wish to access Verdaccio's config:

- `ssh uat1`
- `cat /soft/wordpress/home/tuuatapi/.config/verdaccio/config.yaml`

# [Verdaccio] Debugging

## Connect to the server

- Ask the Shared Components team to add your SSH key on the server.

- Connect by ssh:

```bash
ssh ubuntu@{your verdaccio url}
```

## Logs

- Verdaccio: `/var/log/verdaccio.out.log` and `/var/log/verdaccio.err.log`

- Nginx: `/var/log/nginx/error.log` and `/var/log/nginx/access.log`

## Config files

- **Verdaccio**: `/home/ubuntu/.config/verdaccio/config.yaml`

  After modifying the config, restart it with:

  ```bash
  sudo supervisorctl restart verdaccio
  ```

  Check that it's running with:

  ```bash
  sudo supervisorctl status verdaccio
  ```

- **Nginx**: `/etc/nginx/nginx.conf`

  After modifying the config, restart it with:

  ```bash
  sudo service nginx reload
  ```
